"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4851],{4851:(E,f,r)=>{r.r(f),r.d(f,{HomePageModule:()=>M});var h=r(6895),s=r(4881),x=r(4719),P=r(8564),y=r(301),e=r(6738),v=r(595),T=r(2472),_=r(9646),D=r(8411),F=r(1481),Z=r(1111),C=r(3834),b=r(2325);function S(i,l){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const g=l.$implicit;e.xp6(1),e.Oqu(g)}}function A(i,l){if(1&i&&(e.TgZ(0,"ion-col",9),e._UZ(1,"div",18),e.qZA()),2&i){const g=e.oxw();e.xp6(1),e.Q6J("innerHTML",g.pdfPreview,e.oJD)}}const I=[{path:"",component:(()=>{var i;class l{constructor(n,o,t,c,a,d,u,m,p,O){this.documentScanner=n,this.ocr=o,this.platform=t,this.androidPermissions=c,this.camera=a,this.pdfGenerator=d,this.sanitizer=u,this.file=m,this.fileOpener=p,this.webview=O,this.safeScanDocBase64Image="",this.scanimg=[],this.pdfPreview="",this.pdfData="",this.recognizedText=[],this.extractScanImage=""}ionViewWillEnter(){this.checkPermissions()}checkPermissions(){if(this.platform.is("android")){const n=[this.androidPermissions.PERMISSION.CAMERA,this.androidPermissions.PERMISSION.READ_EXTERNAL_STORAGE,this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE];n.forEach(o=>{this.androidPermissions.checkPermission(o).then(t=>{console.log("perm",o),t.hasPermission?this.androidPermissions.requestPermissions(o).then(c=>{const a=n.every(d=>c[d].hasPermission);console.log("allGranted",a),a||this.requestPermissions(n)}):this.requestPermissions(o)},t=>{this.requestPermissions(n)})})}}requestPermissions(n){this.androidPermissions.requestPermissions(n).then(o=>{console.log("Permissions granted:",o)},o=>{console.error("Error requesting permissions:",o)})}scanDocument(n){console.log("Scanning document...",n),this.documentScanner.scanDoc({sourceType:n,fileName:"scanned-document",returnBase64:!0}).then(t=>{this.scanimg.push(`data:image/jpeg;base64,${t}`),this.safeScanDocBase64Image=this.sanitizer.bypassSecurityTrustUrl(t),console.log("Scanned Document: ",t)}).catch(t=>{console.error("Error scanning document:",t)})}generatePDF(){console.log("Generating PDF with scanned images:",this.scanimg);let n="";this.scanimg.forEach(o=>{n+=`<img src="${o}" style="width:100%; height:auto; margin-bottom:20px;"/>`}),this.pdfPreview=n,this.pdfGenerator.fromData(n,{documentSize:"A4",landscape:"portrait",type:"base64"}).then(o=>{console.log("PDF generated successfully"),this.pdfData=o,this.savePdf(o)}).catch(o=>{console.error("Error generating PDF:",o)})}createDirectory(){this.file.createDir(this.file.dataDirectory,"docScanner",!0).then(()=>{console.log("Directory created successfully!")}).catch(t=>{console.error("Error creating directory:",t)})}saveFile(){const o="example.txt",t="This is an example content for the file.";this.file.writeFile(this.file.dataDirectory+"docScanner",o,t,{replace:!0}).then(c=>{console.log("File saved successfully at:",c.nativeURL),this.openfileContent(c.nativeURL,o,t)}).catch(c=>{console.error("Error saving file:",c)})}checkDirectory(){const n=this.file.dataDirectory+"docScanner";console.log(n,"directoryPath"),this.file.checkDir(n,"").then(()=>{console.log("Directory exists!")}).catch(()=>{console.error("Directory does not exist.")})}checkFile(){const n=this.file.dataDirectory+"docScanner/",o="example.txt";this.file.checkFile(n,o).then(t=>{console.log("File exists!"),console.log("fileContent!",t),this.openfileContent(n,o,t)}).catch(()=>{console.error("File does not exist.")})}openfileContent(n,o,t){this.fileOpener.open(n,t).then(()=>console.log("File opened successfully")).catch(c=>console.error("Error opening file:",c))}savePdf(n){console.log("Saving PDF..."),this.createDirectory();const o=this.base64ToBlob(n,"application/pdf"),t="scanned-document.pdf",c=this.file.dataDirectory+"docScanner";console.log("fileName",t),console.log("directoryPath",c),console.log("fileContent",o),this.file.writeFile(c,t,o,{replace:!0}).then(a=>{console.log("File saved successfully at:",a.nativeURL),this.openfileContent(a.nativeURL,t,"application/pdf")}).catch(a=>{console.error("Error saving file:",a)})}writeFile(n,o,t){this.file.writeFile(n,o,t,{replace:!0}).then(c=>{console.log("PDF saved successfully at:",c.nativeURL),this.openPDF(c.nativeURL)}).catch(c=>{console.error("Error saving PDF:",c)})}openPDF(n){this.fileOpener.open(n,"application/pdf").then(()=>console.log("PDF opened successfully")).catch(o=>console.error("Error opening PDF:",o))}base64ToBlob(n,o){const t=atob(n),c=[];for(let a=0;a<t.length;a+=512){const d=t.slice(a,a+512),u=Array.from(d).map(p=>p.charCodeAt(0)),m=new Uint8Array(u);c.push(m)}return new Blob(c,{type:o})}captureImage(){this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(o=>{console.log("Image captured:",o),this.scanImage(o)},o=>{console.error("Camera error:",o)})}scanImage(n){console.log(n,n),this.ocr.recText(y.$.NORMFILEURL,n).then(o=>{console.log("Recognized text:",o),this.extractScanImage=n,this.recognizedText=null==o?void 0:o.wordtext,console.log(this.recognizedText)}).catch(o=>{console.error("OCR error:",o)})}captureAndRecognizeText(){this.scanImage("file:///storage/emulated/0/Download/sample-image.jpg")}}return(i=l).\u0275fac=function(n){return new(n||i)(e.Y36(v._),e.Y36(y.p),e.Y36(s.t4),e.Y36(T.r),e.Y36(_.V1),e.Y36(D.r),e.Y36(F.H7),e.Y36(Z.$),e.Y36(C.u),e.Y36(b.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-home"]],decls:43,vars:5,consts:[[3,"translucent"],[3,"fullscreen"],[1,"ion-padding"],["size","6"],[1,"cardContainer","ion-no-margin",3,"click"],[1,"d-flx"],["name","scan-outline","size","large",1,"ion-padding"],[1,"cardContainer","ion-no-margin","bg2",3,"click"],["name","text-outline","size","large",1,"ion-padding"],["size","12"],[3,"click"],[2,"width","100%"],[3,"src"],[4,"ngFor","ngForOf"],["size","12",4,"ngIf"],["size","6",1,"ion-text-right"],["fill","clear",1,"ion-text-capitalize",3,"click"],["shape","round",1,"ion-text-capitalize",3,"click"],[3,"innerHTML"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3," DocScanner Ionic Cordova App "),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-row",2)(6,"ion-col",3)(7,"ion-card",4),e.NdJ("click",function(){return o.scanDocument(1)}),e.TgZ(8,"div",5),e._UZ(9,"ion-icon",6),e.TgZ(10,"ion-card-subtitle"),e._uU(11,"Scan"),e.qZA(),e.TgZ(12,"p"),e._uU(13,"Document, ID card "),e.qZA()()()(),e.TgZ(14,"ion-col",3)(15,"ion-card",7),e.NdJ("click",function(){return o.captureImage()}),e.TgZ(16,"div",5),e._UZ(17,"ion-icon",8),e.TgZ(18,"ion-card-subtitle"),e._uU(19,"Extract Text"),e.qZA(),e.TgZ(20,"p"),e._uU(21,"Pdf, jpg, txt"),e.qZA()()()(),e.TgZ(22,"ion-col",9)(23,"ion-button",10),e.NdJ("click",function(){return o.createDirectory()}),e._uU(24,"Create Directory"),e.qZA(),e.TgZ(25,"ion-button",10),e.NdJ("click",function(){return o.saveFile()}),e._uU(26,"Save File"),e.qZA(),e.TgZ(27,"ion-button",10),e.NdJ("click",function(){return o.checkDirectory()}),e._uU(28,"Check Directory"),e.qZA(),e.TgZ(29,"ion-button",10),e.NdJ("click",function(){return o.checkFile()}),e._uU(30,"Check File"),e.qZA(),e.TgZ(31,"ion-card",11),e._UZ(32,"img",12),e.TgZ(33,"ion-card-content")(34,"ion-label"),e.YNc(35,S,2,1,"span",13),e.qZA()()()(),e.YNc(36,A,2,1,"ion-col",14),e.TgZ(37,"ion-col",15)(38,"ion-button",16),e.NdJ("click",function(){return o.scanDocument(0)}),e._uU(39," Keep Scanning "),e.qZA()(),e.TgZ(40,"ion-col",15)(41,"ion-button",17),e.NdJ("click",function(){return o.generatePDF()}),e._uU(42," Save PDF "),e.qZA()()()()),2&n&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(28),e.s9C("src",o.extractScanImage,e.LSH),e.xp6(3),e.Q6J("ngForOf",o.recognizedText),e.xp6(1),e.Q6J("ngIf",o.pdfPreview))},dependencies:[h.sg,h.O5,s.YG,s.PM,s.FN,s.tO,s.wI,s.W2,s.Gu,s.gu,s.Q$,s.Nd,s.wd,s.sr],styles:[".cardContainer[_ngcontent-%COMP%]{border-radius:12px;height:180px;width:auto;background-color:#ffc86d;display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:wrap}.bg2[_ngcontent-%COMP%]{background-color:#ffe37d}.d-flx[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.d-flx[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding:16px;background:white;border-radius:50%;margin-top:10px}.d-flx[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{font-size:18px;font-weight:600;padding-top:10px;color:#455a64}.imagContainer[_ngcontent-%COMP%]{height:250px;width:100%;object-fit:contain;padding:16px}.OcrIcon[_ngcontent-%COMP%]{background-color:#3f404161;width:40px;height:40px;border-radius:50%;padding:10px;position:relative;float:right;bottom:10px;right:10px}.OcrIcon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff;font-size:22px}"]}),l})()}];let H=(()=>{var i;class l{}return(i=l).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[P.Bz.forChild(I),P.Bz]}),l})(),M=(()=>{var i;class l{}return(i=l).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[v._],imports:[h.ez,x.u5,s.Pc,H]}),l})()}}]);