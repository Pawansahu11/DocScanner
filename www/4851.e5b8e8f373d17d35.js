"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4851],{4851:(R,u,r)=>{r.r(u),r.d(u,{HomePageModule:()=>S});var f=r(6895),s=r(4881),y=r(4719),P=r(8564),x=r(6696),e=r(6738),v=r(595),T=r(2472),_=r(9646),D=r(8411),C=r(1481),M=r(1111),b=r(3834),I=r(2325),E=r(2149);function Z(i,d){if(1&i){const a=e.EpF();e.TgZ(0,"ion-col",11)(1,"ion-card",12)(2,"ion-card-title"),e._uU(3,"Extracted Text"),e.qZA(),e.TgZ(4,"div",13),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.copyText())}),e._UZ(5,"ion-icon",14),e.qZA(),e.TgZ(6,"ion-card-content")(7,"ion-label",15),e._uU(8),e.qZA()()()()}if(2&i){const a=e.oxw();e.xp6(8),e.hij(" ",a.recognizedText," ")}}function F(i,d){if(1&i&&(e.TgZ(0,"ion-col",11),e._UZ(1,"div",16),e.qZA()),2&i){const a=e.oxw();e.xp6(1),e.Q6J("innerHTML",a.pdfPreview,e.oJD)}}function H(i,d){if(1&i){const a=e.EpF();e.TgZ(0,"div",2)(1,"ion-col",17)(2,"ion-button",18),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.scanDocument(0))}),e._uU(3," Keep Scanning "),e.qZA()(),e.TgZ(4,"ion-col",17)(5,"ion-button",19),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.generatePDF())}),e._uU(6," Save PDF "),e.qZA()()()}}const w=[{path:"",component:(()=>{var i;class d{constructor(n,o,t,c,l,g,p,h,m,z,O){this.documentScanner=n,this.ocr=o,this.platform=t,this.androidPermissions=c,this.camera=l,this.pdfGenerator=g,this.sanitizer=p,this.file=h,this.fileOpener=m,this.webview=z,this.clipboard=O,this.safeScanDocBase64Image="",this.scanimg=[],this.pdfPreview="",this.pdfData="",this.recognizedText="",this.extractScanImage=""}ionViewWillEnter(){this.checkPermissions(),console.log(this.pdfPreview)}copyText(){this.clipboard.copy(this.recognizedText).then(()=>{alert("copied to clipboard!"),console.log("copied to clipboard!")}).catch(n=>{console.error("Error copying to clipboard:",n)})}checkPermissions(){if(this.platform.is("android")){const n=[this.androidPermissions.PERMISSION.CAMERA,this.androidPermissions.PERMISSION.READ_EXTERNAL_STORAGE,this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE];n.forEach(o=>{this.androidPermissions.checkPermission(o).then(t=>{t.hasPermission?this.androidPermissions.requestPermissions(o).then(c=>{const l=n.every(g=>c[g].hasPermission);console.log("allGranted",l),l||this.requestPermissions(o)}):this.requestPermissions(o)},t=>{this.requestPermissions(o)})})}}requestPermissions(n){this.androidPermissions.requestPermissions(n).then(o=>{console.log("Permissions granted:",o)},o=>{console.error("Error requesting permissions:",o)})}scanDocument(n){console.log("Scanning document...",n),this.documentScanner.scanDoc({sourceType:n,fileName:"scanned-document",returnBase64:!0,quality:4}).then(t=>{this.scanimg.push(`data:image/jpeg;base64,${t}`),this.safeScanDocBase64Image=this.sanitizer.bypassSecurityTrustUrl(t),console.log("Scanned Document: ",t)}).catch(t=>{console.error("Error scanning document:",t)})}generatePDF(){console.log("Generating PDF with scanned images:",this.scanimg);let n="";this.scanimg.forEach(o=>{n+=`<img src="${o}" style="width:100%; height:auto; margin-bottom:20px;"/>`}),this.pdfPreview=n,console.log(this.pdfPreview,"this.pdfPreview"),this.pdfGenerator.fromData(this.pdfPreview,{documentSize:"A4",landscape:"portrait",type:"base64"}).then(o=>{console.log("PDF generated successfully"),this.pdfData=o,this.savePdf(o)}).catch(o=>{console.error("Error generating PDF:",o)})}createDirectory(){this.file.createDir(this.file.dataDirectory,"docScanner",!0).then(()=>{console.log("Directory created successfully!")}).catch(t=>{console.error("Error creating directory:",t)})}saveFile(){const o="example.txt",t="This is an example content for the file.";this.file.writeFile(this.file.dataDirectory+"docScanner",o,t,{replace:!0}).then(c=>{console.log("File saved successfully at:",c.nativeURL),this.openfileContent(c.nativeURL,o,t)}).catch(c=>{console.error("Error saving file:",c)})}openfileContent(n,o,t){this.fileOpener.open(n,t).then(()=>console.log("File opened successfully")).catch(c=>console.error("Error opening file:",c))}savePdf(n){console.log("Saving PDF...",n),this.createDirectory();const o=this.base64ToBlob(n,"application/pdf"),t=`scanned-document${Math.random()}.pdf`;this.file.writeFile(this.file.dataDirectory+"docScanner",t,o,{replace:!0}).then(l=>{console.log("File saved successfully at:",l.nativeURL),this.openfileContent(l.nativeURL,t,"application/pdf")}).catch(l=>{console.error("Error saving file:",l)})}writeFile(n,o,t){this.file.writeFile(n,o,t,{replace:!0}).then(c=>{console.log("PDF saved successfully at:",c.nativeURL),this.openPDF(c.nativeURL)}).catch(c=>{console.error("Error saving PDF:",c)})}openPDF(n){this.fileOpener.open(n,"application/pdf").then(()=>console.log("PDF opened successfully")).catch(o=>console.error("Error opening PDF:",o))}base64ToBlob(n,o){const t=atob(n),c=[];for(let l=0;l<t.length;l+=512){const g=t.slice(l,l+512),p=Array.from(g).map(m=>m.charCodeAt(0)),h=new Uint8Array(p);c.push(h)}return new Blob(c,{type:o})}captureImage(){this.camera.getPicture({quality:50,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(o=>{console.log("Image captured:",o),this.scanImage(o)},o=>{console.error("Camera error:",o)})}scanImage(n){console.log(n,n),this.ocr.recText(x.$.NORMFILEURL,n).then(o=>{console.log("Recognized text:",o),this.extractScanImage=n,this.recognizedText=o.lines.linetext.join(" "),console.log(this.recognizedText)}).catch(o=>{console.error("OCR error:",o)})}}return(i=d).\u0275fac=function(n){return new(n||i)(e.Y36(v._),e.Y36(x.p),e.Y36(s.t4),e.Y36(T.r),e.Y36(_.V1),e.Y36(D.r),e.Y36(C.H7),e.Y36(M.$),e.Y36(b.u),e.Y36(I.k),e.Y36(E.T))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-home"]],decls:25,vars:5,consts:[[3,"translucent"],[3,"fullscreen"],[1,"ion-padding"],["size","6"],[1,"cardContainer","ion-no-margin",3,"click"],[1,"d-flx"],["name","scan-outline","size","large",1,"ion-padding"],[1,"cardContainer","ion-no-margin","bg2",3,"click"],["name","text-outline","size","large",1,"ion-padding"],["size","12",4,"ngIf"],["class","ion-padding",4,"ngIf"],["size","12"],[2,"width","100%"],[1,"copyIcon",3,"click"],["name","copy-outline"],[1,"ion-padding","ion-margin-top"],[3,"innerHTML"],["size","6",1,"ion-text-right"],["fill","clear",1,"ion-text-capitalize",3,"click"],["shape","round",1,"ion-text-capitalize",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3," DocScanner Ionic Cordova App "),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-row",2)(6,"ion-col",3)(7,"ion-card",4),e.NdJ("click",function(){return o.scanDocument(0)}),e.TgZ(8,"div",5),e._UZ(9,"ion-icon",6),e.TgZ(10,"ion-card-subtitle"),e._uU(11,"Scan"),e.qZA(),e.TgZ(12,"p"),e._uU(13,"Document, ID card "),e.qZA()()()(),e.TgZ(14,"ion-col",3)(15,"ion-card",7),e.NdJ("click",function(){return o.captureImage()}),e.TgZ(16,"div",5),e._UZ(17,"ion-icon",8),e.TgZ(18,"ion-card-subtitle"),e._uU(19,"Extract Text"),e.qZA(),e.TgZ(20,"p"),e._uU(21,"Pdf, jpg, txt"),e.qZA()()()(),e.YNc(22,Z,9,1,"ion-col",9),e.YNc(23,F,2,1,"ion-col",9),e.YNc(24,H,7,0,"div",10),e.qZA()()),2&n&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(18),e.Q6J("ngIf",o.recognizedText),e.xp6(1),e.Q6J("ngIf",o.pdfPreview),e.xp6(1),e.Q6J("ngIf",o.scanimg&&o.scanimg.length>0))},dependencies:[f.O5,s.YG,s.PM,s.FN,s.tO,s.Dq,s.wI,s.W2,s.Gu,s.gu,s.Q$,s.Nd,s.wd,s.sr],styles:[".cardContainer[_ngcontent-%COMP%]{border-radius:12px;height:180px;width:auto;background-color:#ffc86d;display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:wrap}.copyIcon[_ngcontent-%COMP%]{position:relative;float:right;height:30px;width:30px;font-size:18px;background:gray;color:#fff;padding:6px;border-radius:50%;right:5px;top:5px;z-index:99}.bg2[_ngcontent-%COMP%]{background-color:#ffe37d}.d-flx[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.d-flx[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding:16px;background:white;border-radius:50%;margin-top:10px}.d-flx[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{font-size:18px;font-weight:600;padding-top:10px;color:#455a64}.imagContainer[_ngcontent-%COMP%]{height:250px;width:100%;object-fit:contain;padding:16px}.OcrIcon[_ngcontent-%COMP%]{background-color:#3f404161;width:40px;height:40px;border-radius:50%;padding:10px;position:relative;float:right;bottom:10px;right:10px}.OcrIcon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff;font-size:22px}"]}),d})()}];let A=(()=>{var i;class d{}return(i=d).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[P.Bz.forChild(w),P.Bz]}),d})(),S=(()=>{var i;class d{}return(i=d).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[v._],imports:[f.ez,y.u5,s.Pc,A]}),d})()}}]);